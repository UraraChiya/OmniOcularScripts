<!--Author: ViKaleidoscope, UraraChiya-->
<!--Date: 2025/12/23-->
<!--Version: 1.7.10-4.2.3.5-->
<oo>
    <init>
        function up(word) {
            return word.substring(0, 1).toUpperCase() + word.substring(1);
        }
    </init>
    <init>
        function getSlot(inventory, slot, slotName) {
            slotName = slotName || 'Slot';
            for (var index in inventory) {
                if (inventory[index][slotName] == slot) {
                    return inventory[index];
                }
            }
        }
    </init>
    <tileentity id="TileArcaneWorkbench">
        <line>
            var Wand = getSlot(nbt['Inventory'], 10, 'Slot');
            return name(Wand);
        </line>
        <line>
            var WandFocus = getSlot(nbt['Inventory'], 10, 'Slot');
            return name(WandFocus['tag']['focus']);
        </line>
        <line>
            var TagVis = getSlot(nbt['Inventory'], 10, 'Slot');
            var rt = [];
            rt.push(YELLOW + (TagVis['tag']['aer'] / 100).toFixed(1));
            rt.push(DLIGHTBLUE + (TagVis['tag']['ignis'] / 100).toFixed(1));
            rt.push(BLUE + (TagVis['tag']['aqua'] / 100).toFixed(1));
            rt.push(LIGHTGRAY + (TagVis['tag']['ordo'] / 100).toFixed(1));
            rt.push(DARKGRAY + (TagVis['tag']['perditio'] / 100).toFixed(1));
            return rt.join(WHITE + ' | ' + RESET);
        </line>
    </tileentity>
    <tileentity id="TileInfusionStone">
        <line displayname="hud.msg.Thaumcraft.Instability">
            if (nbt['crafting'] != 0) return nbt['instability'].toFixed(0);
        </line>
    </tileentity>
    <tileentity id="TileAlchemyFurnace">
        <line displayname="hud.msg.Thaumcraft.VisAmount">
            return nbt['Vis'] + GRAY + ' / ' + WHITE + '50';
        </line>
    </tileentity>
    <tileentity id="TileCrucible">
        <line>
            return WHITE + nbt['Amount'] + GRAY + ' / ' + WHITE + '1000 mB';
        </line>
    </tileentity>
    <tileentity id="TileArcaneBore">
        <line>
            if (nbt['Inventory'][0]['Slot'] != 0) {
                return translate('hud.msg.Thaumcraft.BorePick') + ': ' + name(nbt['Inventory'][0]);
            } else {
                return translate('hud.msg.Thaumcraft.BorePick') + ': ' + name(nbt['Inventory'][1]);
            }
        </line>
    </tileentity>
    <tileentity id="TileSpa">
        <line displayname="item.ItemBathSalts.name">
            return nbt['Items']['0']['Count'];
        </line>
        <line>
            if (nbt['FluidName'] != undefined) return WHITE + nbt['Amount'] + GRAY + ' / ' + WHITE + '5000 mB';
        </line>
    </tileentity>
    <tileentity id="TileFocalManipulator">
        <line>
            name(nbt['ItemsSynced'][0]);
        </line>
    </tileentity>
    <tileentity id="TileNodeConverter">
        <line>
            if (nbt['status'] != 0) return GREEN + 'Activated';
        </line>
    </tileentity>
    <tileentity id="TileFluxScrubber">
        <line>
            if (nbt['power'] != 0) return GREEN + 'Activated';
        </line>
    </tileentity>
    <tileentity id="TileNode">
        <line displayname="hud.msg.Thaumcraft.NodeType">
            var result = [];
            var types = [
                translate('nodetype.NORMAL.name'),
                translate('nodetype.UNSTABLE.name'),
                translate('nodetype.DARK.name'),
                translate('nodetype.TAINTED.name'),
                translate('nodetype.HUNGRY.name'),
                translate('nodetype.PURE.name')
            ];
            var modifiers = [
                translate('nodemod.BRIGHT.name'),
                translate('nodemod.PALE.name'),
                translate('nodemod.FADING.name')
            ];
            if (nbt.type) result.push(types[nbt.type]);
            if (nbt.modifier) result.push(modifiers[nbt['modifier']]);
            return result.join(', ');
        </line>
        <line displayname="tc.research_name.ASPECTS">
            var aspectsInfo = ['\\n'];
            for (var i in nbt['AspectsBase']) {
                var aspectBase = nbt['AspectsBase'][i];
                var aspectName = aspectBase['key'];
                var amountBase = aspectBase['amount'];
                var amount = -1;
                for (var j in nbt['Aspects']) {
                    var aspect = nbt['Aspects'][j];
                    if (aspect['key'] == aspectName) {
                        amount = aspect['amount'];
                        break;
                    }
                }
                aspectsInfo.push(
                    '    ' +
                        GREEN +
                        translate('tc.aspect.' + aspectName) +
                        ': ' +
                        WHITE +
                        amount +
                        ' / ' +
                        amountBase
                );
            }
            return aspectsInfo.join('\\n');
        </line>
    </tileentity>
    <entity id="Thaumcraft.Golem">
        <line displayname="hud.msg.Thaumcraft.GolemCore">
            return translate('item.ItemGolemCore.' + nbt['Core'] + '.name');
        </line>
    </entity>
</oo>
